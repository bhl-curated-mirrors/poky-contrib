From acf11f1ac360717cb192166a72350f69ebed92e9 Mon Sep 17 00:00:00 2001
From: Chen Qi <Qi.Chen@windriver.com>
Date: Mon, 26 Feb 2018 15:34:52 +0800
Subject: [PATCH 10/32] check for uchar.h in meson.build

Use #if HAVE_UCHAR_H to include uchar.h conditionally.

Signed-off-by: Khem Raj <raj.khem@gmail.com>
Upstream-Status: Pending

Signed-off-by: Chen Qi <Qi.Chen@windriver.com>
---
 meson.build         | 1 +
 src/basic/missing.h | 2 ++
 2 files changed, 3 insertions(+)

diff --git a/meson.build b/meson.build
index 85c2ee6aa..a5e249dc7 100644
--- a/meson.build
+++ b/meson.build
@@ -581,6 +581,7 @@ foreach header : ['linux/btrfs.h',
                   'sys/auxv.h',
                   'valgrind/memcheck.h',
                   'valgrind/valgrind.h',
+                  'uchar.h',
                  ]
 
         conf.set10('HAVE_' + header.underscorify().to_upper(),
diff --git a/src/basic/missing.h b/src/basic/missing.h
index 5a602e9a6..cdb4eb4be 100644
--- a/src/basic/missing.h
+++ b/src/basic/missing.h
@@ -38,7 +38,9 @@
 #include <sys/resource.h>
 #include <sys/socket.h>
 #include <sys/syscall.h>
+#if HAVE_UCHAR_H
 #include <uchar.h>
+#endif
 #include <unistd.h>
 
 #if HAVE_AUDIT
-- 
2.11.0

