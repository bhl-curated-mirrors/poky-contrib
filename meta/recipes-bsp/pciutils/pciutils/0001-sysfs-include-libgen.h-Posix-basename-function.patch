From 4f59a02e57f07c0e2820d0060642fa9a2d375a34 Mon Sep 17 00:00:00 2001
From: Khem Raj <raj.khem@gmail.com>
Date: Sun, 10 Dec 2023 17:42:26 -0800
Subject: [PATCH] sysfs: include libgen.h Posix basename function

glibc provides two implementations for basename one POSIX and another
one is glibc extension which is used when string.h is included,
otherwise libgen.h is needed to use POSIX version. This ensures that
posix version is used. It makes it compile on musl + clang17

Fixes
| sysfs.c:449:53: error: call to undeclared function 'basename'; ISO C99 and later do not support implicit function declarations [-Wimplicit-function-declaration]

Upstream-Status: Pending
Signed-off-by: Khem Raj <raj.khem@gmail.com>
---
 lib/sysfs.c | 1 +
 1 file changed, 1 insertion(+)

diff --git a/lib/sysfs.c b/lib/sysfs.c
index ffa4f9d..e8b6d53 100644
--- a/lib/sysfs.c
+++ b/lib/sysfs.c
@@ -9,6 +9,7 @@
 
 #define _GNU_SOURCE
 
+#include <libgen.h>
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>
-- 
2.43.0

